<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Panda Royale ‚Äì Score</title>
<style>
  :root{
    --bg:#0f1013; --panel:#15171c; --ink:#f5f7fb; --muted:#b6bdc9; --grid:#262a33; --shadow:#0008;
  }
  body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.3 system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;padding:12px}
  .sheet{background:#1b1e24;border:1px solid #0b0c10;border-radius:16px;box-shadow:0 18px 72px var(--shadow);padding:14px}
  header{text-align:center;margin:4px 0 12px}
  header h1{margin:0;font-weight:900;font-size:34px;letter-spacing:.06em}
  header h1 span{font-weight:900}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;justify-content:space-between;align-items:center;margin:8px 0}
  .btn,select{background:#0e1117;color:var(--ink);border:1px solid #2d3340;border-radius:10px;padding:8px 12px;font-weight:700;cursor:pointer}
  .names{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 10px}
  .pname{background:#0e1117;color:var(--ink);border:1px solid #2d3340;border-radius:10px;padding:8px 10px;font-weight:700;width:160px;max-width:44vw}
  .tabs{display:flex;gap:6px;overflow:auto;margin-bottom:8px;border-bottom:1px solid #20232b;padding-bottom:4px}
  .tab{padding:6px 10px;border:1px solid #2e3340;border-radius:999px;background:#0f1219;font-weight:800;cursor:pointer;white-space:nowrap}
  .tab.active{background:#1b2130;border-color:#3a4358}
  .board{border:1px solid var(--grid);border-radius:12px;background:#0e1015;position:relative}
  .scrollX{overflow-x:auto;overflow-y:hidden;width:100%;touch-action:pan-x;-webkit-overflow-scrolling:touch}
  table{border-collapse:collapse;min-width:980px;font-size:14px}
  th,td{border:1px solid #262a33;padding:6px;text-align:center;background:#141820}
  th.round,td.round{width:50px;font-weight:900;background:#10131a}
  th.block{font-size:16px;font-weight:900;background:#0b0e14}
  input[type="number"]{width:70px;background:#0a0d12;color:var(--ink);border:1px solid #2a2f3b;border-radius:8px;padding:6px;text-align:center;font-weight:700}
  .row-total{font-weight:900;background:#0d1016}
  tfoot td{background:#0c0f15;font-weight:900}
  .grand{font-size:18px}
  .scroll-btn{position:absolute;top:40%;background:#000c;border:none;color:white;font-size:22px;border-radius:50%;padding:8px;cursor:pointer;opacity:0.7}
  .scroll-btn:hover{opacity:1}
  .scroll-left{left:6px}
  .scroll-right{right:6px}
</style>
</head>
<body>
<div class="sheet">
  <header><h1>PANDA <span>ROYAL</span></h1></header>
  <div class="toolbar">
    <div>
      <label id="lblPlayers">üë• Jugadors</label>
      <select id="numPlayers"><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select>
      <button class="btn" id="startBtn">‚ôªÔ∏è</button>
    </div>
    <div>
      <select id="lang"></select>
      <button class="btn" id="exportBtn">üì§</button>
      <button class="btn" id="importBtn">üì•</button>
      <button class="btn" id="clearBtn">üÜï</button>
    </div>
  </div>
  <div class="names" id="nameArea"></div>
  <div class="tabs" id="tabs"></div>
  <div class="board">
    <button class="scroll-btn scroll-left" id="btnLeft">‚¨ÖÔ∏è</button>
    <button class="scroll-btn scroll-right" id="btnRight">‚û°Ô∏è</button>
    <div class="scrollX" id="scrollX">
      <table id="scoreTable"></table>
    </div>
  </div>
</div>

<script>
// idioma m√≠nim per demo
const I18N={ca:{players:"Jugadors",total:"TOTAL",round:"Ronda",yellow:"Groc",purple:"Porpra√ó2",blue:"Blau",red:"Vermell Œ£√ó#",green:"Verd",white:"Blanc",pink:"Rosa",tabTotal:"üèÜ Total",namePH:"Jugador"}};
let curLang="ca"; const ROUNDS=10;
function blankPlayer(n){return{name:n,rows:Array.from({length:ROUNDS},()=>({y:'',p:'',b:'',glitter:false,rSum:'',rCount:'',g:'',c:'',pk:'',_row:0})),total:0};}
function newState(n){return{active:0,numPlayers:n,players:Array.from({length:n},(_,i)=>blankPlayer("J"+(i+1)))};}
function toInt(v){let n=parseInt(v);return isNaN(n)?0:n;}
function calcRow(r){return r._row=toInt(r.y)+toInt(r.p)*2+toInt(r.b)+(r.glitter?toInt(r.b):0)+toInt(r.rSum)*toInt(r.rCount)+toInt(r.g)+toInt(r.c)+toInt(r.pk);}
function calcPlayer(p){p.total=p.rows.reduce((a,r)=>a+calcRow(r),0);}
let state=newState(2);
const tabs=document.getElementById('tabs'),table=document.getElementById('scoreTable'),scrollX=document.getElementById('scrollX');
function buildTabs(){tabs.innerHTML='';state.players.forEach((p,i)=>{let b=document.createElement('button');b.className='tab'+(i===state.active?' active':'');b.textContent=`${p.name} (${p.total})`;b.onclick=()=>{state.active=i;buildTabs();buildTable();};tabs.appendChild(b)});let b=document.createElement('button');b.className='tab'+(state.active==='all'?' active':'');b.textContent=I18N[curLang].tabTotal;b.onclick=()=>{state.active='all';buildTabs();buildTable();};tabs.appendChild(b);}
function buildTable(){const t=I18N[curLang];if(state.active==='all'){table.innerHTML='<tr><th>'+t.players+'</th><th>'+t.total+'</th></tr>'+state.players.map(p=>`<tr><td>${p.name}</td><td>${p.total}</td></tr>`).join('');return;}let p=state.players[state.active];let h='<thead><tr><th>'+t.round+'</th><th>'+t.yellow+'</th><th>'+t.purple+'</th><th>'+t.blue+'</th><th>'+t.red+'</th><th>'+t.green+'</th><th>'+t.white+'</th><th>'+t.pink+'</th><th>'+t.total+'</th></tr></thead><tbody>';for(let r=0;r<ROUNDS;r++){let row=p.rows[r];h+=`<tr><td>${r+1}</td><td><input data-k="y" data-r="${r}" value="${row.y}"></td><td><input data-k="p" data-r="${r}" value="${row.p}"></td><td><input data-k="b" data-r="${r}" value="${row.b}"></td><td><input data-k="rSum" data-r="${r}" value="${row.rSum}" style="width:40px">√ó<input data-k="rCount" data-r="${r}" value="${row.rCount}" style="width:40px"></td><td><input data-k="g" data-r="${r}" value="${row.g}"></td><td><input data-k="c" data-r="${r}" value="${row.c}"></td><td><input data-k="pk" data-r="${r}" value="${row.pk}"></td><td>${row._row}</td></tr>`}h+='</tbody>';table.innerHTML=h;table.querySelectorAll('input').forEach(inp=>inp.oninput=(e)=>{let k=e.target.dataset.k,r=+e.target.dataset.r;state.players[state.active].rows[r][k]=e.target.value;recalc();});}
function recalc(){state.players.forEach(calcPlayer);buildTabs();buildTable();}
buildTabs();buildTable();
// Scroll buttons
document.getElementById('btnLeft').onclick=()=>{scrollX.scrollBy({left:-200,behavior:'smooth'});}
document.getElementById('btnRight').onclick=()=>{scrollX.scrollBy({left:200,behavior:'smooth'});}
</script>
</body>
</html>
